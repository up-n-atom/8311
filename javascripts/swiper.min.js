(async()=>{const Swiper=(await import('https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.mjs')).default;const sync=(s,list)=>{s.slides.forEach((el,i)=>{const idx=el.hasAttribute('step')?Number(el.getAttribute('step'))-1:i;const li=list.children[idx];if(li instanceof HTMLLIElement){li.dataset.slideTo=i;li.classList.toggle('step-flash',i===s.activeIndex);}});};const load=async()=>{document.querySelectorAll('.swiper').forEach(el=>{if(el.swiper)el.swiper.destroy();});new Swiper('.swiper',{createElements:true,observer:true,observeParents:true,pagination:{auto:true,clickable:true,renderBullet:function(i,cls){const step=this.slides[i].getAttribute('step')||(i+1);return`<span class="${cls}">${step}</span>`;}},navigation:true,on:{init:function(s){let list=s.el.nextElementSibling;while(list&&!(list instanceof HTMLOListElement)){list=list.nextElementSibling;}
if(!list)return;s.controller=new AbortController();const{signal}=s.controller;sync(s,list);['click','mouseover'].forEach(type=>{list.addEventListener(type,(e)=>{const li=e.target.closest('li');const targetIdx=li?.dataset?.slideTo;if(targetIdx===undefined)return;const idx=Number(targetIdx);if(type==='click'||s.activeIndex!==idx){s.slideTo(idx);}},{signal});});s.linkedList=list;list.dataset.swiperLinked="true";},observerUpdate:(s)=>s.linkedList&&sync(s,s.linkedList),slideChange:(s)=>s.linkedList&&sync(s,s.linkedList),destroy:(s)=>s.controller?.abort()}});};if(typeof app!=="undefined"){app.document$.subscribe(load);}else{document.readyState==='loading'?document.addEventListener('DOMContentLoaded',load):await load();}})();